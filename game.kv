ScreenManager:
    MainScreen:
    Level1:
    Level2:

<MainScreen>:
    name: "main"
    canvas.before:
        Rectangle:
            size: self.size
            source: 'graphics/Main_menu_bg.jpg'
    RelativeLayout:
        Button:
            font_size: dp(30)
            font_name: 'graphics/fonts/pricedown bl.otf'
            text: "Level 1"
            on_press: app.root.current="level1"
            pos_hint: {"center_x": .5, "center_y": .5}
            size_hint: .2, .15
            background_color: 1, .3, .4, .85
            opacity: 1 if self.state == 'normal' else .5
        Button:
            font_size: dp(30)
            font_name: 'graphics/fonts/pricedown bl.otf'
            text: "Level 2"
            on_press: app.root.current="level2"
            pos_hint: {"center_x": .5, "center_y": .3}
            size_hint: .2, .15
            background_color: 1, .3, .4, .85
            opacity: 1 if self.state == 'normal' else .5

<Level1>:
    name: "level1"
    on_pre_enter: app.screen_on_pre_enter(1)
    #on_pre_leave: app.screen_on_pre_leave(1)
    on_enter: app.screen_on_enter(1)
    on_leave: app.screen_on_leave(1)
    BoxLayout:
        orientation: "horizontal"
        BoxLayout:
            orientation: "vertical"
            spacing: 2
            size_hint: app.side_bar_width, 1
            RemainingLifePercent
                id: remaining_life_percent_lvl1
            BoxLayout:
                size_hint: 1, 0.03
                Label:
                    canvas:
                        Rectangle:
                            pos: self.pos
                            size: self.size
                            source: "graphics/entities/star_small.png"
                NumCollectedStars:
                    id: num_stars_collected_lvl1
            ToggleButton:
                id: kiss_button_lvl1
                size_hint: 1, 0.2
                text: "Kiss"
                on_state: app.on_toggle_button_state(self, 1)
                #size_hint: 0.15, 0.15
                #height: "90dp"
                #width: "90dp"
                #pos_hint: {'x': 0.45, 'y': 0.1}
        FloatLayout:
            #size_hint: 0, 0.9
            id: layout_lvl1
            on_touch_down: app.touch_down_handler(1, args)
            canvas.before:
                Rectangle:
                    size: self.size
                    pos: self.pos
                    source: "graphics/levels-bg/PvZ_day_bg_lvl1_cropped.jpg"
            Character:
                id: character_image_lvl1
                pos: root.center_x-self.size[0]/2, root.center_y-self.size[1]/2



<Level2>:
    name: "level2"
    on_pre_enter: app.screen_on_pre_enter(2)
    #on_pre_leave: app.screen_on_pre_leave(2)
    on_enter: app.screen_on_enter(2)
    on_leave: app.screen_on_leave(2)
    BoxLayout:
        orientation: "horizontal"
        BoxLayout:
            orientation: "vertical"
            spacing: 2
            size_hint: app.side_bar_width, 1
            RemainingLifePercent
                id: remaining_life_percent_lvl2
            BoxLayout:
                size_hint: 1, 0.03
                Label:
                    canvas:
                        Rectangle:
                            pos: self.pos
                            size: self.size
                            source: "graphics/entities/star_small.png"
                NumCollectedStars:
                    id: num_stars_collected_lvl2
            ToggleButton:
                id: kiss_button_lvl2
                size_hint: 1, 0.2
                text: "Kiss"
                on_state: app.on_toggle_button_state(self, 2)
                #size_hint: 0.15, 0.15
                #height: "90dp"
                #width: "90dp"
                #pos_hint: {'x': 0.45, 'y': 0.1}
        FloatLayout:
            id: layout_lvl2
            on_touch_down: app.touch_down_handler(2, args)
            canvas.before:
                Rectangle:
                    size: self.size
                    pos: self.pos
                    source: "graphics/levels-bg/PvZ_day_bg_lvl1_cropped.jpg"
            Character:
                id: character_image_lvl2
                pos: root.center_x-self.size[0]/2, root.center_y-self.size[1]/2

<NumCollectedStars@Label>:
    text: "0/0"
    font_size: 20
    #background_normal: ''
    #id: num_stars_collected
    #size_hint: (1, 0.15)
    #pos_hint: {'x': 0.0, 'y': 0.20}



#<Monster@Image>:
#    id: monster_image
#    size_hint: (0.15, 0.15)
#    pos_hint: {'x': 0.8, 'y': 0.8}
#    source: "graphics/entities/enemy.png"
#    #im_num: 10
#    allow_stretch: True
#    #on_im_num: app.change_monst_im(self)
#    #on_pos_hint: app.monst_pos_hint(self)

<Character@Image>:
    id: character_image
    size_hint: (0.25, 0.25)
    #pos_hint: {'x': 0.2, 'y': 0.6}
    source: "graphics/entities/Adelita_1.png"
    im_num: 0
    allow_stretch: True
    #on_im_num: app.change_char_im(self)
    #on_pos_hint: app.char_pos_hint(self)
    #start_im_num: 0
    #end_im_num: 7

<RemainingLifePercent@Label>:
    remaining_life_size_hint_y: 0.3
    size_hint: (1, 0.3)
    #pos_hint: {'x': 0.0, 'y': 0.4}
    #font_size: 20
    canvas:
        Color:
            rgb: (0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size
